(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{7386:function(n,t,e){"use strict";var o=this&&this.__createBinding||(Object.create?function(n,t,e,o){void 0===o&&(o=e);var r=Object.getOwnPropertyDescriptor(t,e);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,o,r)}:function(n,t,e,o){void 0===o&&(o=e),n[o]=t[e]}),r=this&&this.__exportStar||function(n,t){for(var e in n)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||o(t,n,e)};Object.defineProperty(t,"__esModule",{value:!0});const a=e(536);a.default.init=function(n={}){const t=function(){const n={host:"arweave.net",port:443,protocol:"https"};if(!window||!window.location||!window.location.protocol||!window.location.hostname)return n;const t=window.location.protocol.replace(":",""),e=window.location.hostname,o=window.location.port?parseInt(window.location.port):"https"==t?443:80;return["localhost","127.0.0.1"].includes(e)||"file"==t?n:{host:e,port:o,protocol:t}}(),e=n.protocol||t.protocol,o=n.host||t.host,r=n.port||t.port;return new a.default(Object.assign(Object.assign({},n),{host:o,protocol:e,port:r}))},window.Arweave=a.default,r(e(536),t),t.default=a.default},7648:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sets",function(){return e(408)}])},408:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return j}});var o=e(7568),r=e(4051),a=e.n(r),s=e(5893),c=e(9008),i=e.n(c),d=e(7386),l=e.n(d),u=e(7294),h=e(1163),f=e(1664),p=e.n(f),w=e(7356),_=e.n(w),g=e(4006),v=function(n){return(0,s.jsx)(p(),{href:"".concat((0,g.Z)(),"/set?tx_id=").concat(n.set.tx_id),children:(0,s.jsx)("a",{children:(0,s.jsxs)("div",{className:_().cont,children:[(0,s.jsx)("p",{className:_().title,children:n.set.title}),(0,s.jsxs)("div",{className:_().cont_right,children:[(0,s.jsxs)("p",{children:[n.set.card_count," cards"]}),(0,s.jsx)(p(),{href:"".concat((0,g.Z)(),"/sets?owner=").concat(n.set.owner_address),children:(0,s.jsx)("a",{className:_().short_address,children:(0,s.jsxs)("p",{children:["Created By: ",function(){var t=n.set.owner_address;return t.substring(0,5)+".."+t.substring(t.length-4)}()]})})}),(0,s.jsxs)("p",{children:["Created On: ",new Date(1e3*n.set.timestamp).toLocaleString()]})]})]})})})},m=e(4342),x=e.n(m),j=function(){var n=l().init({host:"arweave.net",port:443,protocol:"https"}),t=(0,h.useRouter)(),e=(0,u.useState)([]),r=e[0],c=e[1],d=(0,u.useState)(!0),f=d[0],w=d[1],_=function(){var t=(0,o.Z)(a().mark((function t(){var e,o,r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:10,e=new URLSearchParams(window.location.search),o=e.get("owner")?'owners: ["'.concat(e.get("owner"),'"]'):"",r=e.get("after")?'after: "'.concat(e.get("after"),'"'):"",s="{\n      transactions(\n        first: ".concat(10,"\n        ").concat(r,"\n        ").concat(o,'\n        tags: [\n          {\n            name: "Content-Type",\n            values: ["application/json"]\n          },\n          {\n            name: "App-Name",\n            values: ["3cards"]\n          }\n        ]\n      ) {\n        edges {\n          node {\n            id\n            owner {\n              address\n            }\n            block {\n              timestamp\n            }\n            tags {\n              name\n              value\n            }\n          }\n        }\n      }\n    }'),n.api.post("/graphql",{query:s}).then((function(n){var t=[];n.data.data.transactions.edges.forEach((function(n){var e,o,r,a=(null===(e=n.node.tags.find((function(n){return"Title"===n.name})))||void 0===e?void 0:e.value)||"Unnamed Set";t.push({tx_id:n.node.id,timestamp:(null===(o=n.node.block)||void 0===o?void 0:o.timestamp)||Date.now()/1e3,owner_address:n.node.owner.address,title:a.length>50?a.slice(0,47)+"...":a,card_count:(null===(r=n.node.tags.find((function(n){return"Card-Count"===n.name})))||void 0===r?void 0:r.value)||"?"})})),c(t),w(!1),console.log(t)})).catch((function(n){c([]),w(!1),console.log(n)}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,u.useEffect)((function(){setTimeout((function(){console.log("Loading sets"),_()}),0)}),[t.asPath]),(0,s.jsxs)("div",{className:x().container,children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Find Sets - 3cards"})}),(0,s.jsxs)("main",{className:x().main,children:[(0,s.jsx)("h3",{children:"Find Sets"}),f?(0,s.jsx)("div",{className:"lds-dual-ring"}):0===r.length?(0,s.jsx)("div",{children:"No sets found"}):(0,s.jsx)("div",{}),(0,s.jsx)("div",{children:r.map((function(n,t){return(0,s.jsx)(v,{id:t,set:n},t)}))}),(0,s.jsxs)("div",{className:x().page_control,children:[(0,s.jsx)("p",{children:"<"}),(0,s.jsx)(p(),{href:"".concat((0,g.Z)()).concat(function(){var n={};r.length>0&&(n.after=r[r.length-1].tx_id);var t=new URLSearchParams;try{t=new URLSearchParams(window.location.search)}catch(o){}t.get("owner")&&(n.owner=t.get("owner"));var e=new URLSearchParams(n);return e.toString()?"?".concat(e.toString()):""}()),children:(0,s.jsx)("p",{children:">"})})]})]})]})}},7356:function(n){n.exports={cont:"SetInfo_cont__QQswK",title:"SetInfo_title__3IzZf",cont_right:"SetInfo_cont_right__5kis0"}},4342:function(n){n.exports={container:"Sets_container__Fhacz",main:"Sets_main__T6Wk3",page_control:"Sets_page_control__QIw_o"}},1163:function(n,t,e){n.exports=e(387)}},function(n){n.O(0,[458,774,888,179],(function(){return t=7648,n(n.s=t);var t}));var t=n.O();_N_E=t}]);
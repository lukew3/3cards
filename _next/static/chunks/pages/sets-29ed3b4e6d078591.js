(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{7648:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sets",function(){return t(6042)}])},6042:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return w}});var s=t(7568),r=t(4051),a=t.n(r),c=t(5893),o=t(9008),i=t.n(o),d=t(7386),l=t.n(d),u=t(7294),h=t(1163),f=t(1664),_=t.n(f),p=t(4401),m=t.n(p),x=t(4006),v=function(n){return(0,c.jsx)(_(),{href:"".concat((0,x.Z)(),"/set.html?tx_id=").concat(n.set.tx_id),children:(0,c.jsx)("a",{children:(0,c.jsxs)("div",{className:m().cont,children:[(0,c.jsx)("p",{className:m().title,children:n.set.title}),(0,c.jsxs)("div",{className:m().cont_right,children:[(0,c.jsx)(_(),{href:"".concat((0,x.Z)(),"/sets.html?owner=").concat(n.set.owner_address),children:(0,c.jsx)("a",{className:m().short_address,children:(0,c.jsxs)("p",{children:["Created By: ",function(){var e=n.set.owner_address;return e.substring(0,5)+".."+e.substring(e.length-4)}()]})})}),(0,c.jsxs)("p",{children:["Created On: ",new Date(1e3*n.set.timestamp).toLocaleString()]})]})]})})})},j=t(1894),g=t.n(j),w=function(){var n=l().init({host:"arweave.net",port:443,protocol:"https"}),e=(0,h.useRouter)(),t=(0,u.useState)([]),r=t[0],o=t[1],d=(0,u.useState)(!0),f=d[0],p=d[1],m=function(){var t=(0,s.Z)(a().mark((function t(){var s,r,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:10,s=e.query.owner?'owners: ["'.concat(e.query.owner,'"]'):"",r=e.query.after?'after: "'.concat(e.query.after,'"'):"",c="{\n      transactions(\n        first: ".concat(10,"\n        ").concat(r,"\n        ").concat(s,'\n        tags: [\n          {\n            name: "Content-Type",\n            values: ["application/json"]\n          },\n          {\n            name: "App-Name",\n            values: ["3cards"]\n          }\n        ]\n      ) {\n        edges {\n          node {\n            id\n            owner {\n              address\n            }\n            block {\n              timestamp\n            }\n            tags {\n              name\n              value\n            }\n          }\n        }\n      }\n    }'),n.api.post("/graphql",{query:c}).then((function(n){var e=[];n.data.data.transactions.edges.forEach((function(n){var t,s,r=(null===(t=n.node.tags.find((function(n){return"Title"===n.name})))||void 0===t?void 0:t.value)||"Unnamed Set";r.length>50&&(r=r.slice(0,47),r+="..."),e.push({tx_id:n.node.id,timestamp:(null===(s=n.node.block)||void 0===s?void 0:s.timestamp)||Date.now()/1e3,owner_address:n.node.owner.address,title:r})})),o(e),p(!1),console.log(e)})).catch((function(n){o([]),p(!1),console.log(n)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,u.useEffect)((function(){setTimeout((function(){console.log("Loading sets"),m()}),0)}),[e.asPath]),(0,c.jsxs)("div",{className:g().container,children:[(0,c.jsxs)(i(),{children:[(0,c.jsx)("title",{children:"Find Sets - 3cards"}),(0,c.jsx)("meta",{name:"description",content:"Create a flash card set with 3cards"}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,c.jsxs)("main",{className:g().main,children:[(0,c.jsx)("h3",{children:"Find Sets"}),f?(0,c.jsx)("div",{className:"lds-dual-ring"}):0===r.length?(0,c.jsx)("div",{children:"No sets found"}):(0,c.jsx)("div",{}),(0,c.jsx)("div",{className:g().terms,children:r.map((function(n,e){return(0,c.jsx)(v,{id:e,set:n},e)}))}),(0,c.jsxs)("div",{className:g().page_control,children:[(0,c.jsx)("p",{children:"<"}),(0,c.jsx)(_(),{href:"".concat((0,x.Z)()).concat(function(){var n={};r.length>0&&(n.after=r[r.length-1].tx_id),e.query.owner&&(n.owner=e.query.owner);var t=new URLSearchParams(n);return t.toString()?"?".concat(t.toString()):""}()),children:(0,c.jsx)("p",{children:">"})})]})]})]})}},4401:function(n){n.exports={cont:"SetInfo_cont__UNrHQ",title:"SetInfo_title__j0vcl",cont_right:"SetInfo_cont_right__5_IhH"}},1894:function(n){n.exports={container:"Sets_container__eP4tQ",main:"Sets_main__j7JkP",page_control:"Sets_page_control__mKZjM"}},9008:function(n,e,t){n.exports=t(5443)},1163:function(n,e,t){n.exports=t(387)}},function(n){n.O(0,[797,774,888,179],(function(){return e=7648,n(n.s=e);var e}));var e=n.O();_N_E=e}]);